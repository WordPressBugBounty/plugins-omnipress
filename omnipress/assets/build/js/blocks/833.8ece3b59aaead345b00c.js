"use strict";(globalThis.webpackChunkomnipress=globalThis.webpackChunkomnipress||[]).push([[833],{6833:(e,t,r)=>{r.r(t),r.d(t,{default:()=>L});var o=r(4467),n=r(3986),i=r(42),a=r(3453),s=r(6087),l=r(6942),c=r.n(l),p=r(819),u=r(3162),d=r(4715),b=r(6427),f=r(3582),m=r(7143),h=r(7723),v=r(692),y=r(3562),g=r(7432),j=r(4182),O=r(2227),w=["video"],x=[{name:"autoplay",label:"Autoplay"},{name:"loop",label:"Loop"},{name:"muted",label:"Muted"},{name:"controls",label:"Controls"},{name:"playsInline",label:"Plays inline"}],P=[{label:"Auto",value:"auto"},{label:"Metadata",value:"metadata"},{label:"None",value:"none"}],_=r(9491),k=r(790);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A={class:"className",frameborder:"frameBorder",marginheight:"marginHeight",marginwidth:"marginWidth"};const I=function(e){var t=e.html,r=e.setAttributes,o=(0,s.useRef)(),n=(0,s.useMemo)((function(){var e=(new window.DOMParser).parseFromString(t,"text/html").querySelector("iframe"),o={};return e?(Array.from(e.attributes).forEach((function(e){var t=e.name,r=e.value;"style"!==t&&(o[A[t]||t]=r)})),r({iframe:!0,poster:"",id:void 0,muted:!1,controls:!1,autoplay:!1,playsInline:!1,loop:!1}),o):o}),[t]);function i(e){var t=e.data,r=void 0===t?{}:t,i=r.secret,a=r.message,s=r.value;"height"===a&&i===n["data-secret"]&&(o.current.height=s)}return(0,s.useEffect)((function(){var e=o.current.ownerDocument.defaultView;return e.addEventListener("message",i),function(){e.removeEventListener("message",i)}}),[]),(0,k.jsx)("div",{className:"op-block__video-wrapper op-block__video-embed-wrapper",children:(0,k.jsx)("iframe",E({ref:(0,_.useMergeRefs)([o,(0,_.useFocusableIframe)()]),title:n.title},n))})};var D=["attributes","setAttributes","clientId","children"];function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const M=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"omnipress/video","version":"1.0.0","title":"Video","category":"omnipress","icon":"","description":"Embed a video from your media library or upload a new one.","supports":{"className":true,"anchor":true},"attributes":{"blockId":{"type":"string"},"content":{"type":"string","source":"html","selector":"figure","default":""},"videoWrapper":{"type":"object","default":{"width":"max(100%, 300px)"}},"iframe":{"type":"boolean","default":false},"height":{"type":"number","source":"attribute","selector":"video","attribute":"height"},"caption":{"type":"rich-text","source":"rich-text","selector":"figcaption","__experimentalRole":"content"},"id":{"type":"number","__experimentalRole":"content"},"loop":{"type":"boolean","source":"attribute","selector":"video","attribute":"loop"},"muted":{"type":"boolean","source":"attribute","selector":"video","attribute":"muted","default":false},"controls":{"type":"boolean","source":"attribute","selector":"video","attribute":"controls","default":true},"autoplay":{"type":"boolean","source":"attribute","selector":"video","attribute":"autoplay","default":false},"playsInline":{"type":"boolean","source":"attribute","selector":"video","attribute":"playsinline","default":true},"preload":{"type":"string","source":"attribute","selector":"video","attribute":"preload","default":"auto"},"poster":{"type":"string","source":"attribute","selector":"video","attribute":"poster"},"src":{"type":"string"},"width":{"type":"number","source":"attribute","selector":"video"},"tracks":{"__experimentalRole":"content","type":"array","items":{"type":"object"},"default":[]}},"opSettings":{"videoWrapper":{"group":"design","selector":".op-block__video-wrapper","label":"Video Wrapper","fields":{"dimension":{"width":true,"height":true},"border":{"border":true,"borderRadius":true}}}},"textdomain":"omnipress"}');function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){(0,o.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F=M.opSettings;const L=U(U({name:M.name,edit:function(e){var t=e.attributes,r=e.setAttributes,l=e.clientId,_=e.children,S=(0,n.A)(e,D).className,E=(0,s.useState)(null),A=(0,a.A)(E,2),N=A[0],C=A[1],T=t.id,M=t.isCaption,B=t.height,U=t.width,F=t.preload,L=t.blockId,V=t.title,z=t.src,W=t.iframe,G=t.size,q=t.poster,K=t.autoplay,H=t.loop,J=t.muted,$=t.playsInline,Q=(t.controls,t.allowfullscreen,t.referrerpolicy,t.posterSrc,t.alt,(0,d.useBlockProps)({className:c()("op-block op-".concat(L," op-block__video ").concat(S),{uploading:N}),"data-type":"omnipress/video"})),X=(0,m.useDispatch)(v.store).createErrorNotice,Y=(0,m.useSelect)((function(e){var t,r=e(f.store),o=r.getEmbedPreview,n=r.isPreviewEmbedFallback,i=r.isRequestingEmbedPreview,a=r.getThemeSupports;if(!z)return{fetching:!1,cannotEmbed:!1};var s=o(z),l=n(z),c=!1===(null==s?void 0:s.html)&&void 0===(null==s?void 0:s.type),p=404===(null==s||null===(t=s.data)||void 0===t?void 0:t.status),u=!(z.includes(".mp4")||!s||c||p);return{preview:u?s:void 0,fetching:i(z),themeSupportsResponsive:a()["responsive-embeds"],cannotEmbed:!u||l}}),[z]),Z=Y.preview,ee=Y.fetching,te=Y.cannotEmbed,re=function(e){e&&r({src:e})},oe=function(e){if(e&&e.url)if((0,u.isBlobURL)(e.url))C(e.url);else if(C(),e){var t=function(e){var t,r=Object.fromEntries(Object.entries(e).filter((function(e){var t=(0,a.A)(e,1)[0];return["id","alt","title","caption"].includes(t)})));return r.src=e.url||(null===(t=e.media_details)||void 0===t||null===(t=t.sizes)||void 0===t||null===(t=t[G])||void 0===t?void 0:t.source_url)||e.url,r}(e);r(R(R({},t),{},{iframe:!1}))}},ne=function(e){X(e,{type:"snackbar"}),e&&r({src:void 0,alt:void 0,caption:void 0,id:void 0}),C()};return(0,s.useEffect)((function(){te&&r({iframe:!1})}),[te]),z?ee?(0,k.jsx)("div",R(R({},Q),{},{children:(0,k.jsx)(b.Spinner,{})})):(0,k.jsxs)(y.A,{blockName:"Video",children:[(0,k.jsxs)("div",R(R({},Q),{},{children:[_,(0,k.jsxs)(d.BlockControls,{group:"other",children:[(0,k.jsx)(b.Tooltip,{placement:"top",delay:200,text:M?"Remove caption":"Add caption",children:(0,k.jsx)(p.Gcc,{onClick:function(){return r({isCaption:!M})},style:{margin:"10px",cursor:"pointer",fontSize:"32px",color:M?"var(--op-clr-primary)":""}})}),z?(0,k.jsx)(b.ToolbarItem,{title:"Image",children:(0,k.jsx)(d.MediaReplaceFlow,{mediaId:T,mediaURL:z,allowedTypes:w,accept:"video/*",onSelect:oe,onSelectURL:re,onError:ne})}):(0,k.jsx)("div",{role:"toolbar",children:(0,k.jsx)(d.MediaUpload,{onSelect:oe,allowedTypes:w,value:z,render:function(e){var t=e.open;return(0,k.jsx)(b.Button,{onClick:t,className:"components-toolbar__control",children:z?"Change Image":"Upload Image"})}})})]}),te?(0,k.jsx)("figure",{children:(0,k.jsx)("div",{className:"op-block__video-wrapper",children:(0,k.jsx)("video",{title:V,height:B,width:U,poster:q,controls:!0,autoPlay:K,loop:H,muted:J,preload:F,src:z,playsInline:$})})}):(0,k.jsx)("figure",{children:(0,k.jsx)(I,{setAttributes:r,html:null==Z?void 0:Z.html})})]})),(0,k.jsx)(j.G,{group:"general",clientId:l,children:!W&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(b.PanelBody,{title:(0,h.__)("General","omnipress"),children:(0,k.jsxs)(g.j,{children:[(0,k.jsx)("h2",{className:"op-mb-0",children:(0,h.__)("Video Poster","omnipress")}),(0,k.jsx)(d.MediaUpload,{onSelect:function(e){r({poster:e.url})},allowedTypes:["image"],value:z,render:function(e){var t=e.open;return q?(0,k.jsx)("div",{onClick:t,style:{position:"relative",width:"100%",cursor:"pointer",height:"150px",backgroundImage:"url(".concat(q,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",borderRadius:"5px",overflow:"hidden",marginBottom:"10px"},children:(0,k.jsx)(b.Tooltip,{placement:"top",text:(0,h.__)("Remove Poster","omnipress"),children:(0,k.jsx)(O.j55,{style:{cursor:"pointer",fontSize:"17px",color:"var(--op-clr-primary)",position:"absolute",zIndex:99,background:"var(--op-clr-white,",borderRadius:"1px"},onClick:function(e){e.stopPropagation(),r({poster:""})}})})}):(0,k.jsx)("button",{type:"button",className:"op-bg-image-uploader",onClick:t,children:(0,h.__)("Upload Poster","omnipress")})}})]})}),(0,k.jsx)(b.PanelBody,{title:(0,h.__)("Video Controls Toggle","omnipress"),children:(0,k.jsxs)(g.j,{children:[(0,k.jsx)(b.SelectControl,{label:(0,h.__)("Preload Options","omnipress"),options:P,value:F,onChange:function(e){return r({preload:e})}}),x&&x.map((function(e){var n=e.name,i=e.label;return(0,k.jsx)(g.T_,{label:i,checked:t[n],style:{marginBottom:"10px"},onChange:function(){return r((0,o.A)({},n,!t[n]))}},n)}))]})})]})})]}):(0,k.jsxs)("div",R(R({},Q),{},{children:[_,(0,k.jsx)(d.MediaPlaceholder,{icon:i.Ki,allowedTypes:w,onSelect:oe,accept:"video/*",onSelectURL:re,onError:ne})]}))},save:function(e){var t=e.attributes,r=t.blockId,o=t.src,n=t.title,i=t.height,a=t.width,s=t.preload,l=t.poster,c=t.autoplay,p=t.loop,u=t.muted,b=t.controls,f=t.playsInline,m=t.iframe,h=t.isCaption,v=d.useBlockProps.save({className:"op-block op-".concat(r," op-block__video"),"data-type":"omnipress/video"});return o?(0,k.jsx)("div",T(T({},v),{},{children:(0,k.jsxs)("figure",{children:[m?(0,k.jsx)("div",{className:"op-block__video-wrapper op-block__video-embed-wrapper",children:"\n".concat(o,"\n")}):(0,k.jsx)("div",{className:"op-block__video-wrapper",children:(0,k.jsx)("video",{title:n,height:i,width:a,controls:b,autoPlay:c,loop:p,muted:u,preload:s,poster:l,src:o,playsInline:f})}),h&&n&&(0,k.jsx)("figcaption",{children:n})]})})):null},category:"omnipress",keywords:["video","media"],opSettings:F},(0,n.A)(M,["opSettings","name"])),{},{icon:i.Ki})},3562:(e,t,r)=>{r.d(t,{A:()=>f});var o=r(3029),n=r(2901),i=r(388),a=r(3954),s=r(5361),l=r(4467),c=r(6087),p=r(7723),u=r(790);const d=function(e){var t,r,o=e.errorInfo,n=e.error,i=e.blockName;return console.error(n,o),(0,u.jsxs)("details",{className:"op-block-error__handler",style:{whiteSpace:"pre-wrap"},children:[(0,u.jsx)("summary",{children:(0,p.__)("Unfortunately, The [ ".concat(i," ] Block isn't displaying correctly.."),"omnipress")}),(0,u.jsxs)("pre",{children:[(0,u.jsx)("div",{children:(0,u.jsx)("p",{children:(0,p.__)("Our team is looking into it and will update you shortly.","omnipress")})}),(0,u.jsx)("br",{}),(0,u.jsxs)("div",{className:"oaerror danger",children:[(0,u.jsx)("strong",{children:n&&(null===(t=n.toString().split("\n")[0])||void 0===t?void 0:t.split(":")[0])}),":",n&&(null===(r=n.toString().split("\n")[0])||void 0===r?void 0:r.split(":")[1])]})]})]})};function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}const f=function(e){function t(){var e,r,n,s;(0,o.A)(this,t);for(var c=arguments.length,p=new Array(c),u=0;u<c;u++)p[u]=arguments[u];return r=this,n=t,s=[].concat(p),n=(0,a.A)(n),e=(0,i.A)(r,b()?Reflect.construct(n,s||[],(0,a.A)(r).constructor):n.apply(r,s)),(0,l.A)(e,"state",{errorMessage:"",hasError:!1,errorInfo:""}),e}return(0,s.A)(t,e),(0,n.A)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({errorMessage:e,hasError:!0,errorInfo:t})}},{key:"render",value:function(){var e=this.props,t=e.renderError,r=(e.button,e.blockName),o=this.state,n=o.errorMessage;return o.hasError?"function"==typeof t?t({errorMessage:n}):(0,u.jsx)(d,{errorInfo:this.state.errorInfo,blockName:r,error:this.state.errorMessage}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return void 0!==e.statusText&&void 0!==e.status?{errorMessage:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("strong",{children:e.status}),": ",e.statusText]}),hasError:!0}:{errorMessage:e.message,hasError:!0}}}])}(c.Component)},3029:(e,t,r)=>{function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,{A:()=>o})},2901:(e,t,r)=>{r.d(t,{A:()=>i});var o=r(9922);function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(0,o.A)(n.key),n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}},3954:(e,t,r)=>{function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}r.d(t,{A:()=>o})},5361:(e,t,r)=>{function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}r.d(t,{A:()=>n})},388:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(2284);function n(e,t){if(t&&("object"==(0,o.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}}}]);
"use strict";(globalThis.webpackChunkomnipress=globalThis.webpackChunkomnipress||[]).push([[280],{170:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var n=r(4467),o=r(42),a=r(7723);const i=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"omnipress/countdown","version":"1.0.0","title":"Countdown","category":"omnipress","icon":"","description":"Highlight upcoming events with countdown timer","supports":{"className":true,"anchor":true},"opSettings":{"card":{"group":"design","selector":".countdown-card","label":"Card","fields":{"spacing":{"padding":true,"margin":true},"color":{"background":true},"border":{"border":true,"borderRadius":true}}},"number":{"group":"design","selector":".number","label":"Digit","fields":{"spacing":{"padding":true},"color":{"text":true,"background":true},"typography":true,"dimension":{"height":false,"width":false,"min-height":true},"border":{"border":true,"borderRadius":true}}},"label":{"group":"design","selector":".label","label":"Label","fields":{"spacing":{"padding":true},"color":{"background":true},"typography":true,"dimension":{"height":false,"width":false,"min-height":true},"border":{"border":true,"borderRadius":true}}},"labelBottom":{"group":"design","selector":".label-bottom","label":"Bottom Label","fields":{"spacing":{"padding":true},"color":{"text":true,"background":true},"typography":true,"dimension":{"height":false,"width":false,"min-height":true},"border":{"border":true,"borderRadius":true}}},"labelTop":{"group":"design","selector":".label-top","label":"Top Label","fields":{"spacing":{"padding":true},"color":{"text":true,"background":true},"typography":true,"dimension":{"height":false,"width":false,"min-height":true},"border":{"border":true,"borderRadius":true}}},"separator":{"group":"design","selector":".separator","label":"Separator","fields":{"spacing":{"padding":true},"color":{"background":true},"typography":true,"border":{"border":true,"borderRadius":true}}}},"attributes":{"isRecurring":{"type":"boolean","default":false},"startDate":{"type":"string","default":""},"recurringInterval":{"type":"number"},"separatorType":{"type":"string","default":"colon"},"isShowingModal":{"type":"boolean","default":false},"blockId":{"type":"string","default":""},"timezone":{"type":"string"},"styles":{"type":"object","default":{"wrapper":{"padding":{"top":"12px","right":"12px","bottom":"12px","left":"12px"}},"card":{"padding":{"top":"12px","right":"12px","bottom":"12px","left":"12px"}},"separator":{"margin":{"top":"0","right":"12px","bottom":"0","left":"12px"}},"number":{"fontSize":"32px"}}},"hiddenFields":{"type":"array","default":["labelTop","labelBottom"]},"expiredDate":{"type":"string"},"layoutType":{"type":"string","default":"two"},"daysLabel":{"type":"string","default":"DAYS"},"hoursLabel":{"type":"string","default":"HOURS"},"minutesLabel":{"type":"string","default":"MINUTES"},"secondsLabel":{"type":"string","default":"SECONDS"}},"keywords":["countdown","timer","timer"],"textdomain":"omnipress"}');var s=r(9394),l=r(3453),c=r(4715),d=r(6087),u=r(6427),p=r(4182),b=r(8943),g=r(790);var h=r(7881),m=r(8209);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=[{name:"days",label:"DAYS"},{name:"hours",label:"HOURS"},{name:"minutes",label:"MINUTES"},{name:"seconds",label:"SECONDS"}],x={one:["number","labelBottom","labelTop"],two:["number","label","separator"]},j={one:function(e){var t=e.days,r=e.label,n=void 0===r?"DAYS":r;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"countdown-card",children:(0,g.jsx)("span",{className:"number",children:t})}),(0,g.jsx)("span",{className:"label-top",children:"ONLY"}),(0,g.jsxs)("span",{className:"label-bottom",children:[n," LEFT"]})]})}};function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new Date(e);return r.setHours(r.getHours()+t),r.getTime()<=(new Date).getTime()&&0!==t?w(r,t):r}r(1609);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=i.title,T=i.description;const k=D(D({title:(0,a.__)(S,"omnipress"),description:(0,a.__)(T,"omnipress")},i),{},{icon:o.qW,edit:function(e){var t=e.attributes,r=e.setAttributes,o=e.isSelected,i=(e.context,e.clientId),f=t.hiddenFields,O=t.layoutType,D=t.isRecurring,S=t.startDate,T=t.expiredDate,k=(t.timezone,t.recurringInterval),P=(0,d.useState)(),N=(0,l.A)(P,2),A=N[0],R=N[1];(0,d.useEffect)((function(){if(!T&&!D){var e=new Date;e.setDate(e.getDate()+1);var t=e.toISOString().split(".")[0];r({expiredDate:t})}}),[]),(0,d.useEffect)((function(){if(o&&(!D||!(new Date(S).getTime()>(new Date).getTime())&&k)){var e=T?new Date(T):new Date;D&&S&&(e=w(S,k));var t=function(){var t,r=e.getTime()-(new Date).getTime();R(0>(t=r)?{days:0,hours:0,minutes:0,seconds:0}:{days:Math.floor(t/864e5),hours:Math.floor(t%864e5/36e5),minutes:Math.floor(t%36e5/6e4),seconds:Math.floor(t%6e4/1e3)})};if(t(),"one"!==O){var r=setInterval(t,1e3);return function(){return clearInterval(r)}}}}),[T,o,O,S,k]);var F=j[O];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(h.A,y(y({},e),{},{children:[(0,g.jsx)("div",{className:"countdown-container",children:"two"!==t.layoutType?(0,g.jsx)(F,{days:null!=A&&A.days&&A.days>0?A.days:null!=A&&A.hours&&A.hours>0?A.hours:0,label:(null==A?void 0:A.days)>0?void 0:"HOURS"}):3===f.length?(0,g.jsx)("h3",{children:(0,a.__)("All Fields Are Disabled","omnipress")}):v.map((function(e,o){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"countdown-card",children:[!t.hiddenFields.includes("number")&&(0,g.jsx)("span",{id:e.name,className:"number",children:(null==A?void 0:A[e.name])||0}),!t.hiddenFields.includes("label")&&(0,g.jsx)(c.RichText,{value:t[e.name]||e.label,className:"countdown-card-title label",placeholder:e.label,onChange:function(t){r((0,n.A)({},e.name.trim()+"Label",t))}})]},e.name),o<v.length-1&&!t.hiddenFields.includes("separator")&&(0,g.jsx)("span",{className:"separator",children:"|"})]})}))}),(0,g.jsx)(c.InnerBlocks,{template:[["omnipress/paragraph",{placeholder:(0,a.__)("Add content to show when countdown is over. type / to add a new block","omnipress")}]]})]})),o&&(0,g.jsx)(p.G,{clientId:i,group:"general",children:(0,g.jsxs)(b.nM,{panelName:"general",label:"General",initialOpen:!0,children:[(0,g.jsx)(u.ToggleControl,{label:(0,a.__)("Recurring Countdown","omnipress"),checked:t.isRecurring,onChange:function(e){r({isRecurring:e,startDate:e?T:void 0,endDate:e?void 0:S,recurringInterval:void 0})}}),D&&(0,g.jsx)(u.RangeControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,a.__)("Recurring Interval (Hrs.)","omnipress"),value:k,step:1,max:100,min:1,onChange:function(e){r({recurringInterval:e})}}),(0,g.jsx)(u.SelectControl,{options:[{label:"Layout One",value:"one"},{label:"Layout Two",value:"two"}],value:t.layoutType,onChange:function(e){r({layoutType:e,hiddenFields:[].concat((0,s.A)(t.hiddenFields),["label","separator"])})}}),(0,g.jsx)(m.J,{children:(0,a.__)(t.isRecurring?"Start Date":"Expired Date","omnipress")}),(0,g.jsx)(u.DateTimePicker,{currentDate:t.isRecurring?S:T,is12Hour:!0,onChange:function(e){var n=Intl.DateTimeFormat().resolvedOptions().timeZone;t.isRecurring?r({startDate:e,timezone:n}):r({expiredDate:e,timezone:n})}}),(0,g.jsx)("div",{className:"op-mt-3",children:x[O].map((function(e){return(0,g.jsx)(u.ToggleControl,{label:"Show ".concat(e),className:"!op-capitalize",checked:!t.hiddenFields.includes(e),onChange:function(){t.hiddenFields.includes(e)?r({hiddenFields:t.hiddenFields.filter((function(t){return t!==e}))}):r({hiddenFields:[].concat((0,s.A)(t.hiddenFields),[e])})}},e)}))})]})})]})},save:function(){return(0,g.jsx)(c.InnerBlocks.Content,{})},example:{countdownEndDate:"2023-12-22T17:50:33.831+05:45",separatorType:"pipe",divider:{width:"13px"},countdownLabel:{color:"#00d084"},countdownDigits:{color:"#ffffff"},styles:{wrapper:{padding:{top:"12px",right:"12px",bottom:"12px",left:"12px"}}}}})},7881:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(4467),o=r(3986),a=r(4715),i=r(2619),s=r(6087),l=r(6942),c=r.n(l),d=r(4987),u=r(7143),p=r(790),b=["className","isSelected","context","attributes","clientId","setAttributes","tagName","children"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const m=function(e){var t,r,l=e.className,g=(e.isSelected,e.context,e.attributes),m=(e.clientId,e.setAttributes,e.tagName),f=e.children,y=(0,o.A)(e,b),v=(0,u.select)(d.n).getMouseState(),x=c()((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)({},"op-".concat(g.blockId),g.blockId),"is-layout-flex","flex"===(null===(t=g.layout)||void 0===t?void 0:t.display)),"is-layout-grid","grid"===(null===(r=g.layout)||void 0===r?void 0:r.display)),"is-layout-".concat(g.layoutType),!!g.layoutType),"hover-state","hover"===v)),j=(0,s.useRef)(null),w=(0,a.useBlockEditContext)().name,O=m||"div";return(0,p.jsx)(O,h(h(h({},(0,a.useBlockProps)(h({className:"".concat(l," ").concat(x),ref:j,"data-type":w},(0,i.applyFilters)("omnipress.edit.props.".concat(w.split("/")[1]),{})))),y),{},{children:f}))}}}]);
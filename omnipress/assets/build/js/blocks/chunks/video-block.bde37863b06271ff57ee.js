"use strict";(globalThis.webpackChunkomnipress=globalThis.webpackChunkomnipress||[]).push([[2852],{6128:(e,t,o)=>{o.r(t),o.d(t,{default:()=>V});var r=o(4467),n=o(3986),i=o(42),a=o(3453),l=o(6087),s=o(6942),c=o.n(s),p=o(819),u=o(3162),d=o(4715),b=o(6427),m=o(3582),f=o(7143),v=o(7723),y=o(692),g=o(8943),h=o(4182),j=o(2227),O=["video"],w=[{name:"autoplay",label:"Autoplay"},{name:"loop",label:"Loop"},{name:"muted",label:"Muted"},{name:"controls",label:"Controls"},{name:"playsInline",label:"Plays inline"}],x=[{label:"Auto",value:"auto"},{label:"Metadata",value:"metadata"},{label:"None",value:"none"}],P=o(9491),k=o(790);function _(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function S(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?_(Object(o),!0).forEach((function(t){(0,r.A)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):_(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var A={class:"className",frameborder:"frameBorder",marginheight:"marginHeight",marginwidth:"marginWidth"};const E=function(e){var t=e.html,o=e.setAttributes,r=(0,l.useRef)(),n=(0,l.useMemo)((function(){var e=(new window.DOMParser).parseFromString(t,"text/html").querySelector("iframe"),r={};return e?(Array.from(e.attributes).forEach((function(e){var t=e.name,o=e.value;"style"!==t&&(r[A[t]||t]=o)})),o({iframe:!0,poster:"",id:void 0,muted:!1,controls:!1,autoplay:!1,playsInline:!1,loop:!1}),r):r}),[t]);function i(e){var t=e.data,o=void 0===t?{}:t,i=o.secret,a=o.message,l=o.value;"height"===a&&i===n["data-secret"]&&(r.current.height=l)}return(0,l.useEffect)((function(){var e=r.current.ownerDocument.defaultView;return e.addEventListener("message",i),function(){e.removeEventListener("message",i)}}),[]),(0,k.jsx)("div",{className:"op-block__video-wrapper op-block__video-embed-wrapper",children:(0,k.jsx)("iframe",S({ref:(0,P.useMergeRefs)([r,(0,P.useFocusableIframe)()]),title:n.title},n))})};var I=o(7881),N=o(5178),D=["attributes","setAttributes","clientId","children"];function C(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function R(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?C(Object(o),!0).forEach((function(t){(0,r.A)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):C(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function T(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function M(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?T(Object(o),!0).forEach((function(t){(0,r.A)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):T(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const B=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"omnipress/video","version":"1.0.0","title":"Video","category":"omnipress","icon":"","description":"Embed a video from your media library or upload a new one.","supports":{"className":true,"anchor":true},"attributes":{"blockId":{"type":"string"},"content":{"type":"string","source":"html","selector":"figure","default":""},"videoWrapper":{"type":"object","default":{"width":"max(100%, 300px)"}},"iframe":{"type":"boolean","default":false},"height":{"type":"number","source":"attribute","selector":"video","attribute":"height"},"caption":{"type":"rich-text","source":"rich-text","selector":"figcaption","__experimentalRole":"content"},"id":{"type":"number","__experimentalRole":"content"},"loop":{"type":"boolean","source":"attribute","selector":"video","attribute":"loop"},"muted":{"type":"boolean","source":"attribute","selector":"video","attribute":"muted","default":false},"controls":{"type":"boolean","source":"attribute","selector":"video","attribute":"controls","default":true},"autoplay":{"type":"boolean","source":"attribute","selector":"video","attribute":"autoplay","default":false},"playsInline":{"type":"boolean","source":"attribute","selector":"video","attribute":"playsinline","default":true},"preload":{"type":"string","source":"attribute","selector":"video","attribute":"preload","default":"auto"},"poster":{"type":"string","source":"attribute","selector":"video","attribute":"poster"},"src":{"type":"string"},"width":{"type":"number","source":"attribute","selector":"video"},"tracks":{"__experimentalRole":"content","type":"array","items":{"type":"object"},"default":[]}},"opSettings":{"videoWrapper":{"group":"design","selector":".op-block__video-wrapper","label":"Video Wrapper","fields":{"dimension":{"width":true,"height":true},"border":{"border":true,"borderRadius":true}}}},"textdomain":"omnipress"}');function L(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function U(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?L(Object(o),!0).forEach((function(t){(0,r.A)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):L(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var F=B.opSettings;const V=U(U({name:B.name,edit:function(e){var t=e.attributes,o=e.setAttributes,s=e.clientId,P=e.children,_=(0,n.A)(e,D).className,S=(0,l.useState)(null),A=(0,a.A)(S,2),C=A[0],T=A[1],M=t.id,B=t.isCaption,L=t.height,U=t.width,F=t.preload,V=t.blockId,z=t.title,W=t.src,q=t.iframe,G=t.size,K=t.poster,H=t.autoplay,J=t.loop,$=t.muted,Q=t.playsInline,X=(t.controls,t.allowfullscreen,t.referrerpolicy,t.posterSrc,t.alt,(0,f.useDispatch)(y.store).createErrorNotice),Y=(0,f.useSelect)((function(e){var t,o=e(m.store),r=o.getEmbedPreview,n=o.isPreviewEmbedFallback,i=o.isRequestingEmbedPreview,a=o.getThemeSupports;if(!W)return{fetching:!1,cannotEmbed:!1};var l=r(W),s=n(W),c=!1===(null==l?void 0:l.html)&&void 0===(null==l?void 0:l.type),p=404===(null==l||null===(t=l.data)||void 0===t?void 0:t.status),u=!(W.includes(".mp4")||!l||c||p);return{preview:u?l:void 0,fetching:i(W),themeSupportsResponsive:a()["responsive-embeds"],cannotEmbed:!u||s}}),[W]),Z=Y.preview,ee=Y.fetching,te=Y.cannotEmbed,oe=function(e){e&&o({src:e})},re=function(e){if(e&&e.url)if((0,u.isBlobURL)(e.url))T(e.url);else if(T(),e){var t=function(e){var t,o=Object.fromEntries(Object.entries(e).filter((function(e){var t=(0,a.A)(e,1)[0];return["id","alt","title","caption"].includes(t)})));return o.src=e.url||(null===(t=e.media_details)||void 0===t||null===(t=t.sizes)||void 0===t||null===(t=t[G])||void 0===t?void 0:t.source_url)||e.url,o}(e);o(R(R({},t),{},{iframe:!1}))}},ne=function(e){X(e,{type:"snackbar"}),e&&o({src:void 0,alt:void 0,caption:void 0,id:void 0}),T()};return(0,l.useEffect)((function(){te&&o({iframe:!1})}),[te]),W?ee?(0,k.jsx)(I.A,R(R({className:c()("op-block op-".concat(V," op-block__video ").concat(_),{uploading:C})},e),{},{children:(0,k.jsx)(b.Spinner,{})})):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(I.A,R(R({className:c()("op-block op-".concat(V," op-block__video ").concat(_),{uploading:C})},e),{},{children:[P,e.isSelected&&(0,k.jsxs)(d.BlockControls,{group:"other",children:[(0,k.jsx)(b.Tooltip,{placement:"top",delay:200,text:B?"Remove caption":"Add caption",children:(0,k.jsx)(p.Gcc,{onClick:function(){return o({isCaption:!B})},style:{margin:"10px",cursor:"pointer",fontSize:"32px",color:B?"var(--op-clr-primary)":""}})}),W?(0,k.jsx)(b.ToolbarItem,{title:"Image",children:(0,k.jsx)(d.MediaReplaceFlow,{mediaId:M,mediaURL:W,allowedTypes:O,accept:"video/*",onSelect:re,onSelectURL:oe,onError:ne})}):(0,k.jsx)("div",{role:"toolbar",children:(0,k.jsx)(d.MediaUpload,{onSelect:re,allowedTypes:O,value:W,render:function(e){var t=e.open;return(0,k.jsx)(b.Button,{onClick:t,className:"components-toolbar__control",children:W?"Change Image":"Upload Image"})}})})]}),te?(0,k.jsx)("figure",{children:(0,k.jsx)("div",{className:"op-block__video-wrapper",children:(0,k.jsx)("video",{title:z,height:L,width:U,poster:K,controls:!0,autoPlay:H,loop:J,muted:$,preload:F,src:W,playsInline:Q})})}):(0,k.jsx)("figure",{children:(0,k.jsx)(E,{setAttributes:o,html:null==Z?void 0:Z.html})})]})),e.isSelected&&(0,k.jsx)(h.G,{group:"general",clientId:s,children:!q&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(g.nM,{panelName:"general",initialOpen:!0,label:(0,v.__)("Video Poster","omnipress"),children:[(0,k.jsx)("h2",{className:"op-mb-0",children:(0,v.__)("Poster","omnipress")}),(0,k.jsx)(d.MediaUpload,{onSelect:function(e){o({poster:e.url})},allowedTypes:["image"],value:W,render:function(e){var t=e.open;return K?(0,k.jsx)("div",{onClick:t,style:{position:"relative",width:"100%",cursor:"pointer",height:"150px",backgroundImage:"url(".concat(K,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",borderRadius:"5px",overflow:"hidden",marginBottom:"10px"},children:(0,k.jsx)(b.Tooltip,{placement:"top",text:(0,v.__)("Remove","omnipress"),children:(0,k.jsx)("div",{onClick:function(e){e.stopPropagation(),o({poster:""})},className:"op-media--remove-button op-bg-red-200 op-text-red-400  op-cursor-pointer op-flex op-items-center op-justify-center op-absolute op-right-2 op-top-2 op-h-6 op-w-6 op-text-sm op-rounded-full op-transition-all hover:op-bg-red-600 hover:op-text-white",children:(0,k.jsx)(j.j55,{})})})}):(0,k.jsxs)("button",{type:"button",className:"op-flex op-items-center op-justify-center op-gap-2 op-bg-gray-100 op-mt-2 op-w-full op-p-4 op-cursor-pointer op-border op-border-solid op-border-gray-200 op-text-gray-500 op-font-medium op-transition-all hover:op-text-gray-700",onClick:t,children:[(0,k.jsx)(N.Lmn,{}),(0,v.__)("Upload Poster","omnipress")]})}})]}),(0,k.jsxs)(g.nM,{panelName:"video",label:(0,v.__)("Video Controls Toggle","omnipress"),children:[(0,k.jsx)(b.SelectControl,{label:(0,v.__)("Preload Options","omnipress"),options:x,value:F,onChange:function(e){return o({preload:e})}}),w&&w.map((function(e){var n=e.name,i=e.label;return(0,k.jsx)(g.T_,{label:i,checked:t[n],style:{marginBottom:"10px"},onChange:function(){return o((0,r.A)({},n,!t[n]))}},n)}))]})]})})]}):(0,k.jsx)(I.A,R(R({className:c()("op-block op-".concat(V," op-block__video ").concat(_),{uploading:C})},e),{},{children:(0,k.jsx)(d.MediaPlaceholder,{icon:i.Ki,allowedTypes:O,onSelect:re,accept:"video/*",onSelectURL:oe,onError:ne})}))},save:function(e){var t=e.attributes,o=t.blockId,r=t.src,n=t.title,i=t.height,a=t.width,l=t.preload,s=t.poster,c=t.autoplay,p=t.loop,u=t.muted,b=t.controls,m=t.playsInline,f=t.iframe,v=t.isCaption,y=d.useBlockProps.save({className:"op-block op-".concat(o," op-block__video"),"data-type":"omnipress/video"});return r?(0,k.jsx)("div",M(M({},y),{},{children:(0,k.jsxs)("figure",{children:[f?(0,k.jsx)("div",{className:"op-block__video-wrapper op-block__video-embed-wrapper",children:"\n".concat(r,"\n")}):(0,k.jsx)("div",{className:"op-block__video-wrapper",children:(0,k.jsx)("video",{title:n,height:i,width:a,controls:b,autoPlay:c,loop:p,muted:u,preload:l,poster:s,src:r,playsInline:m})}),v&&n&&(0,k.jsx)("figcaption",{children:n})]})})):null},category:"omnipress",keywords:["video","media"],opSettings:F},(0,n.A)(B,["opSettings","name"])),{},{icon:i.Ki})},7881:(e,t,o)=>{o.d(t,{A:()=>v});var r=o(4467),n=o(3986),i=o(4715),a=o(2619),l=o(6087),s=o(4987),c=o(7143),p=o(6942),u=o.n(p),d=o(790),b=["className","isSelected","context","attributes","clientId","setAttributes","tagName","children"];function m(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function f(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?m(Object(o),!0).forEach((function(t){(0,r.A)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):m(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const v=(0,l.forwardRef)((function(e,t){var o,l,p,m,v,y,g,h=e.className,j=(e.isSelected,e.context,e.attributes),O=(e.clientId,e.setAttributes,e.tagName),w=e.children,x=(0,n.A)(e,b),P=(0,c.select)(s.n).getMouseState(),k=u()((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)((0,r.A)({},"op-".concat(j.blockId),j.blockId),"is-layout-flex","flex"===(null===(o=j.layout)||void 0===o?void 0:o.display)),"is-layout-grid","grid"===(null===(l=j.layout)||void 0===l?void 0:l.display)),"is-layout-".concat(j.layoutType),!!j.layoutType),"hover-state","hover"===P),"has-bg-video has-background-media","video"==(null===(p=j.styles)||void 0===p||null===(p=p.wrapper)||void 0===p?void 0:p.backgroundType)&&(null===(m=j.styles)||void 0===m||null===(m=m.wrapper)||void 0===m?void 0:m.backgroundVideo)),"has-bg-image has-background-media","image"==(null===(v=j.styles)||void 0===v||null===(v=v.wrapper)||void 0===v?void 0:v.backgroundType)&&(null===(y=j.styles)||void 0===y||null===(y=y.wrapper)||void 0===y?void 0:y.backgroundImage))),_=(0,i.useBlockEditContext)().name,S=O||"div",A=f(f({},(0,a.applyFilters)("omnipress.edit.props.".concat(_.split("/")[1]),{})),{},{className:"".concat(h," ").concat(k),"data-type":_,ref:t});return Boolean((null!==(g=j.tooltipText)&&void 0!==g?g:"").trim())&&(A=f(f({},A),{},{"data-tooltip":j.tooltipText})),(0,d.jsx)(S,f(f(f({},(0,i.useBlockProps)(A)),x),{},{children:w}))}))}}]);
"use strict";(globalThis.webpackChunkomnipress=globalThis.webpackChunkomnipress||[]).push([[6280],{170:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var n=r(4467),o=r(42),a=r(7723);const i=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"omnipress/countdown","version":"1.0.0","title":"Countdown","category":"omnipress","icon":"","description":"Highlight upcoming events with countdown timer","supports":{"className":true,"anchor":true},"opSettings":{"card":{"group":"design","selector":".countdown-card","label":"Card","fields":{"spacing":{"padding":true,"margin":true},"color":{"background":true},"border":{"border":true,"borderRadius":true}}},"number":{"group":"design","selector":".number","label":"Digit","fields":{"spacing":{"padding":true},"color":{"text":true,"background":true},"typography":true,"dimension":{"height":false,"width":false,"min-height":true},"border":{"border":true,"borderRadius":true}}},"label":{"group":"design","selector":".label","label":"Label","fields":{"spacing":{"padding":true},"color":{"background":true},"typography":true,"dimension":{"height":false,"width":false,"min-height":true},"border":{"border":true,"borderRadius":true}}},"labelBottom":{"group":"design","selector":".label-bottom","label":"Bottom Label","fields":{"spacing":{"padding":true},"color":{"text":true,"background":true},"typography":true,"dimension":{"height":false,"width":false,"min-height":true},"border":{"border":true,"borderRadius":true}}},"labelTop":{"group":"design","selector":".label-top","label":"Top Label","fields":{"spacing":{"padding":true},"color":{"text":true,"background":true},"typography":true,"dimension":{"height":false,"width":false,"min-height":true},"border":{"border":true,"borderRadius":true}}},"separator":{"group":"design","selector":".separator","label":"Separator","fields":{"spacing":{"padding":true},"color":{"background":true},"typography":true,"border":{"border":true,"borderRadius":true}}}},"attributes":{"isRecurring":{"type":"boolean","default":false},"startDate":{"type":"string","default":""},"recurringInterval":{"type":"number"},"separatorType":{"type":"string","default":"colon"},"isShowingModal":{"type":"boolean","default":false},"blockId":{"type":"string","default":""},"timezone":{"type":"string"},"styles":{"type":"object","default":{"wrapper":{"padding":{"top":"12px","right":"12px","bottom":"12px","left":"12px"}},"card":{"padding":{"top":"12px","right":"12px","bottom":"12px","left":"12px"}},"separator":{"margin":{"top":"0","right":"12px","bottom":"0","left":"12px"}},"number":{"fontSize":"32px"}}},"hiddenFields":{"type":"array","default":["labelTop","labelBottom"]},"expiredDate":{"type":"string"},"layoutType":{"type":"string","default":"two"},"daysLabel":{"type":"string","default":"DAYS"},"hoursLabel":{"type":"string","default":"HOURS"},"minutesLabel":{"type":"string","default":"MINUTES"},"secondsLabel":{"type":"string","default":"SECONDS"}},"keywords":["countdown","timer","timer"],"textdomain":"omnipress"}');var s=r(9394),l=r(3453),d=r(4715),c=r(6087),u=r(6427),p=r(4182),b=r(8943),g=r(790);var h=r(7881),m=r(8209);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=[{name:"days",label:"DAYS"},{name:"hours",label:"HOURS"},{name:"minutes",label:"MINUTES"},{name:"seconds",label:"SECONDS"}],w={one:["number","labelBottom","labelTop"],two:["number","label","separator"]},x={one:function(e){var t=e.days,r=e.label,n=void 0===r?"DAYS":r;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"countdown-card",children:(0,g.jsx)("span",{className:"number",children:t})}),(0,g.jsx)("span",{className:"label-top",children:"ONLY"}),(0,g.jsxs)("span",{className:"label-bottom",children:[n," LEFT"]})]})}};function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new Date(e);return r.setHours(r.getHours()+t),r.getTime()<=(new Date).getTime()&&0!==t?j(r,t):r}r(1609);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T=i.title,S=i.description;const k=D(D({title:(0,a.__)(T,"omnipress"),description:(0,a.__)(S,"omnipress")},i),{},{icon:o.qW,edit:function(e){var t=e.attributes,r=e.setAttributes,o=e.isSelected,i=(e.context,e.clientId),f=t.hiddenFields,O=t.layoutType,D=t.isRecurring,T=t.startDate,S=t.expiredDate,k=(t.timezone,t.recurringInterval),A=(0,c.useState)(),P=(0,l.A)(A,2),N=P[0],I=P[1];(0,c.useEffect)((function(){if(!S&&!D){var e=new Date;e.setDate(e.getDate()+1);var t=e.toISOString().split(".")[0];r({expiredDate:t})}}),[]),(0,c.useEffect)((function(){if(o&&(!D||!(new Date(T).getTime()>(new Date).getTime())&&k)){var e=S?new Date(S):new Date;D&&T&&(e=j(T,k));var t=function(){var t,r=e.getTime()-(new Date).getTime();I(0>(t=r)?{days:0,hours:0,minutes:0,seconds:0}:{days:Math.floor(t/864e5),hours:Math.floor(t%864e5/36e5),minutes:Math.floor(t%36e5/6e4),seconds:Math.floor(t%6e4/1e3)})};if(t(),"one"!==O){var r=setInterval(t,1e3);return function(){return clearInterval(r)}}}}),[S,o,O,T,k]);var R=x[O];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(h.A,y(y({},e),{},{children:[(0,g.jsx)("div",{className:"countdown-container",children:"two"!==t.layoutType?(0,g.jsx)(R,{days:null!=N&&N.days&&N.days>0?N.days:null!=N&&N.hours&&N.hours>0?N.hours:0,label:(null==N?void 0:N.days)>0?void 0:"HOURS"}):3===f.length?(0,g.jsx)("h3",{children:(0,a.__)("All Fields Are Disabled","omnipress")}):v.map((function(e,o){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"countdown-card",children:[!t.hiddenFields.includes("number")&&(0,g.jsx)("span",{id:e.name,className:"number",children:(null==N?void 0:N[e.name])||0}),!t.hiddenFields.includes("label")&&(0,g.jsx)(d.RichText,{value:t[e.name]||e.label,className:"countdown-card-title label",placeholder:e.label,onChange:function(t){r((0,n.A)({},e.name.trim()+"Label",t))}})]},e.name),o<v.length-1&&!t.hiddenFields.includes("separator")&&(0,g.jsx)("span",{className:"separator",children:"|"})]})}))}),(0,g.jsx)(d.InnerBlocks,{template:[["omnipress/paragraph",{placeholder:(0,a.__)("Add content to show when countdown is over. type / to add a new block","omnipress")}]]})]})),o&&(0,g.jsx)(p.G,{clientId:i,group:"general",children:(0,g.jsxs)(b.nM,{panelName:"general",label:"General",initialOpen:!0,children:[(0,g.jsx)(u.ToggleControl,{label:(0,a.__)("Recurring Countdown","omnipress"),checked:t.isRecurring,onChange:function(e){r({isRecurring:e,startDate:e?S:void 0,endDate:e?void 0:T,recurringInterval:void 0})}}),D&&(0,g.jsx)(u.RangeControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,a.__)("Recurring Interval (Hrs.)","omnipress"),value:k,step:1,max:100,min:1,onChange:function(e){r({recurringInterval:e})}}),(0,g.jsx)(u.SelectControl,{options:[{label:"Layout One",value:"one"},{label:"Layout Two",value:"two"}],value:t.layoutType,onChange:function(e){r({layoutType:e,hiddenFields:[].concat((0,s.A)(t.hiddenFields),["label","separator"])})}}),(0,g.jsx)(m.J,{children:(0,a.__)(t.isRecurring?"Start Date":"Expired Date","omnipress")}),(0,g.jsx)(u.DateTimePicker,{currentDate:t.isRecurring?T:S,is12Hour:!0,onChange:function(e){var n=Intl.DateTimeFormat().resolvedOptions().timeZone;t.isRecurring?r({startDate:e,timezone:n}):r({expiredDate:e,timezone:n})}}),(0,g.jsx)("div",{className:"op-mt-3",children:w[O].map((function(e){return(0,g.jsx)(u.ToggleControl,{label:"Show ".concat(e),className:"!op-capitalize",checked:!t.hiddenFields.includes(e),onChange:function(){t.hiddenFields.includes(e)?r({hiddenFields:t.hiddenFields.filter((function(t){return t!==e}))}):r({hiddenFields:[].concat((0,s.A)(t.hiddenFields),[e])})}},e)}))})]})})]})},save:function(){return(0,g.jsx)(d.InnerBlocks.Content,{})},example:{countdownEndDate:"2023-12-22T17:50:33.831+05:45",separatorType:"pipe",divider:{width:"13px"},countdownLabel:{color:"#00d084"},countdownDigits:{color:"#ffffff"},styles:{wrapper:{padding:{top:"12px",right:"12px",bottom:"12px",left:"12px"}}}}})},7881:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(4467),o=r(3986),a=r(4715),i=r(2619),s=r(6087),l=r(4987),d=r(7143),c=r(6942),u=r.n(c),p=r(790),b=["className","isSelected","context","attributes","clientId","setAttributes","tagName","children"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const m=(0,s.forwardRef)((function(e,t){var r,s,c,g,m,f,y,v=e.className,w=(e.isSelected,e.context,e.attributes),x=(e.clientId,e.setAttributes,e.tagName),j=e.children,O=(0,o.A)(e,b),D=(0,d.select)(l.n).getMouseState(),T=u()((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)({},"op-".concat(w.blockId),w.blockId),"is-layout-flex","flex"===(null===(r=w.layout)||void 0===r?void 0:r.display)),"is-layout-grid","grid"===(null===(s=w.layout)||void 0===s?void 0:s.display)),"is-layout-".concat(w.layoutType),!!w.layoutType),"hover-state","hover"===D),"has-bg-video has-background-media","video"==(null===(c=w.styles)||void 0===c||null===(c=c.wrapper)||void 0===c?void 0:c.backgroundType)&&(null===(g=w.styles)||void 0===g||null===(g=g.wrapper)||void 0===g?void 0:g.backgroundVideo)),"has-bg-image has-background-media","image"==(null===(m=w.styles)||void 0===m||null===(m=m.wrapper)||void 0===m?void 0:m.backgroundType)&&(null===(f=w.styles)||void 0===f||null===(f=f.wrapper)||void 0===f?void 0:f.backgroundImage))),S=(0,a.useBlockEditContext)().name,k=x||"div",A=h(h({},(0,i.applyFilters)("omnipress.edit.props.".concat(S.split("/")[1]),{})),{},{className:"".concat(v," ").concat(T),"data-type":S,ref:t});return Boolean((null!==(y=w.tooltipText)&&void 0!==y?y:"").trim())&&(A=h(h({},A),{},{"data-tooltip":w.tooltipText})),(0,p.jsx)(k,h(h(h({},(0,a.useBlockProps)(A)),O),{},{children:j}))}))}}]);
(function(){window.addEventListener("load",()=>{let l=document.querySelectorAll('[data-type="omnipress/progress-bar"]');l.length&&l.forEach(s=>{let n=s.querySelector(".circular-progress"),c=s.querySelector(".progress-container"),g=s.querySelector(".step-progressbar"),f=parseInt(s.dataset.progress,10),d=parseInt(s.dataset.completedStep,10);function p(o,t){let r=0,i=e=>{r<=o&&(e(),r++,requestAnimationFrame(()=>i(e)))};if(n){let e=n.querySelector(".value");i(()=>{let u=r/100*360;n.style.background=`conic-gradient(var(--indicator-color, #8b5cf6) 0deg ${u}deg, var(--track-color, #fff) ${u}deg 360deg)`,e&&(e.textContent=`${r} %`)})}if(c){let e=c.querySelector(".progress-fill"),a=c.querySelector(".tooltip");i(()=>{e&&(e.style.width=`${r}%`),a&&(a.innerHTML=`${r}%`,a.style.left=`calc(${r}% - ${a.offsetWidth/2}px)`)})}}if(new IntersectionObserver(o=>{o.forEach(t=>{t.isIntersecting&&p(f,d)})},{threshold:.1,rootMargin:"0px"}).observe(s),!s.dataset.enabledDynamicUpdate)return;new MutationObserver(function(o){for(let t of o)if(t.type==="attributes"&&(t.attributeName==="data-progress"||t.attributeName==="data-step"))if(t.attributeName==="data-step"){let r=s.querySelectorAll(".step"),i=Math.min(parseInt(t.target.dataset.step),r.length);r.forEach((e,a)=>{a<i?(e.classList.add("active"),e.classList.add("progress-indicator"),e.classList.remove("progress-track")):(e.classList.remove("active"),e.classList.add("progress-track"),e.classList.remove("progress-indicator"))}),d=t.target.dataset.completedStep}else p(t.target.dataset.progress,t.target.dataset.completedStep)}).observe(s,{attributes:!0,attributeFilter:["data-step","data-progress"]})})})})();
